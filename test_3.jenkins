#!groovy
//Check tets_1 properties
properties([disableConcurrentBuilds()])

pipeline { 
    agent any 

    triggers { 
        pollSCM ('* * * * *') 
    }

    options{
        buildDiscarder(logRotator(numToKeepStr: '10',artifactNumToKeepStr: '1'))
        timestamps()
    }
    
    stages {
        stage('create docker image') { 
            steps { 
                echo "===================== start building image =========================="
                dir ('docker'){
                    //sh 'docker build -t alpine:latest .'
                    
                    //чтобы пушить image doker в Docker hub
                    //'docker push ingvar1982/test:' 
                    sh 'docker build -t ingvar1982/test:latest .'
                }
            }
        }        
    }
}